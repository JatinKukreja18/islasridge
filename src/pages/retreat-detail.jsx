import { Link } from 'gatsby';
import React from 'react';
import Layout from '../components/Layout';
import kiteImg from '../images/kitePink.png'
import { navigate } from 'gatsby';
import {retreatsData} from '../components/RetreatData';
import SEO from '../components/SEO'

const RetreatDetail = (props) => {
    // const pageData = props.location.state && props.location.state.pageData;
    const pageData = retreatsData.filter((pageData) =>{
        return pageData.code === props.retreatName;
    })

    const filterPageData = pageData[0] ? pageData[0].nextPageData : false;

    console.log(props)
    
    let bgColor = "#f5f9e4"
    if(props.retreatName === "a-la-carte"){
        bgColor = "#FDEDED";
    }
    return (
        <>
            <style>
                {`
                    ${`body,.site-header{background-color: ${bgColor}}`}
                    *, .site-header a, a{color: #442220;}
                    .ham-menus-lines, .ham-menus::before, .ham-menus::after{background-color: black;} 
                `}
            </style>
            <Layout>
                {
                    filterPageData ?
                        <>
                            <SEO
                                title= {`${filterPageData.breadcrumbTitle}`}
                                description="Learn more about us who we are and what we do."
                            />
                            {/* {console.log(pageData)} */}
                            <div className={`container space-for-header ${props.retreatName}`}>
                                <div className="m-heading text-center retreat-title">{filterPageData.breadcrumbTitle}</div>
                                <div className="breadcrumb padding-b-5 m-hidden">
                                    <Link to="/retreats/">Retreats</Link>
                                    <span className="seprator"> / </span>
                                    <span className="added">{filterPageData.breadcrumbTitle}</span>
                                </div>
                                {
                                    filterPageData.listRetreats.map((data, index) =>{
                                        return(
                                            <div className="retreat-main" key={index}>
                                                <div className='aspect-image-wrapper'>
                                                    <div className='aspect-image'>
                                                        <img className="full-width left-img img-cover" src={data.image} height="540" alt="" />
                                                    </div>
                                                </div>
                                                <div className="flex align-v-center retreat-heading-main">
                                                    <div className="">
                                                        <div className="flex align-v-center retreat-heading">
                                                            {/* <img className="" src={kiteImg} alt="" /> */}
                                                            <h5 className="retreat-title">{data.heading}</h5>
                                                        </div>
                                                        <p className="margin-b-0 retrea-desc">{data.description}</p>
                                                        <Link className="more-retreat" to="/enquire/">
                                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 92.04 67.67">
                                                                <defs>
                                                                  <style>

                                                                  </style>
                                                                </defs>
                                                                <g id="Layer_2" data-name="Layer 2">
                                                                  <g id="Layer_1-2" data-name="Layer 1">
                                                                    <g id="Layer_2-2" data-name="Layer 2">
                                                                      <g id="Layer_1-2-2" data-name="Layer 1-2">
                                                                        <g className="cls-1">
                                                                          <path className="cls-2" d="M25.36,40.28l-2.18,0H18.82c0-.26,0-.57.06-.94s0-.76.06-1.19,0-.89,0-1.37v-3.6c0-.48,0-.93,0-1.36s0-.83-.06-1.2,0-.69-.06-.95l1.44,0h2.36l1,0h.9l.66,0L25,31l-.25,0a1,1,0,0,1-.26,0,9.54,9.54,0,0,0-1.22-.15c-.53,0-1.07-.06-1.61-.06H21l-.62,0c0,.48,0,1,0,1.59s0,1.17,0,1.77c.8,0,1.52,0,2.16,0s1.09-.05,1.37-.08l-.15,1.42c-.31,0-.77,0-1.37-.08l-2,0c0,.66,0,1.3,0,1.94s0,1.21,0,1.72l.76,0h.77l.93,0,.88,0,.75,0,.54-.09a1.39,1.39,0,0,1,.27,0,.87.87,0,0,1,.24,0Z"/>
                                                                          <path className="cls-2" d="M28.82,36.76c0,.48,0,.93,0,1.36s0,.83,0,1.19,0,.68.06.93H27.45c0-.26,0-.57.06-.94s0-.76,0-1.19,0-.89,0-1.37,0-1,0-1.42V34.6c0-.49,0-1,0-1.46s0-.93,0-1.36,0-.83,0-1.19,0-.68-.06-.93h1.93c.19.43.71,1.39,1.56,2.87s2,3.45,3.42,5.91v-5.3c0-.48,0-.93,0-1.36s0-.83-.06-1.19,0-.68-.06-.93h1.52c0,.26,0,.58-.06.94s0,.76-.05,1.19,0,.89,0,1.37,0,1,0,1.42v.72c0,.49,0,1,0,1.46s0,.93,0,1.36,0,.83.05,1.19,0,.68.06.93H33.82c-.13-.29-.61-1.16-1.45-2.61l-3.56-6.12V35.3C28.81,35.79,28.82,36.28,28.82,36.76Z"/>
                                                                          <path className="cls-2" d="M46.48,42.25c-.54-.23-1.1-.46-1.68-.68l-1.87-.68c-.66-.23-1.36-.5-2.1-.8a4.39,4.39,0,0,1-2.18-1.91A6.14,6.14,0,0,1,37.86,35a5.83,5.83,0,0,1,.55-2.61A4.51,4.51,0,0,1,40,30.59a5.88,5.88,0,0,1,.93-.51,9.61,9.61,0,0,1,.95-.39,6.43,6.43,0,0,1,.77-.24,2.34,2.34,0,0,1,.38-.09,5.44,5.44,0,0,1,2.09.4,4.7,4.7,0,0,1,1.63,1.12,4.85,4.85,0,0,1,1,1.75,6.48,6.48,0,0,1,.37,2.25,5.81,5.81,0,0,1-.55,2.6A4.51,4.51,0,0,1,46,39.31a6,6,0,0,1-1.08.53,6.27,6.27,0,0,1-1.25.34c.44.12.92.23,1.42.33l1.46.33c.47.11.92.22,1.33.34a5.6,5.6,0,0,1,1,.39L48,43A14.18,14.18,0,0,0,46.48,42.25Zm-6.79-5.66A4.3,4.3,0,0,0,40.45,38a3.41,3.41,0,0,0,1.2.93,3.62,3.62,0,0,0,1.55.33,3.09,3.09,0,0,0,2.48-1.09,4.48,4.48,0,0,0,.94-3,6.06,6.06,0,0,0-.27-1.86,4.26,4.26,0,0,0-.77-1.43,3.5,3.5,0,0,0-1.2-.92,3.58,3.58,0,0,0-1.54-.33,3.11,3.11,0,0,0-2.48,1.08,4.4,4.4,0,0,0-.94,3A6.17,6.17,0,0,0,39.69,36.59Z"/>
                                                                          <path className="cls-2" d="M54.43,40.45a5.74,5.74,0,0,1-.6,0,3.84,3.84,0,0,1-2.61-.83,2.84,2.84,0,0,1-.94-2.26c0-.39,0-.75,0-1.07s0-.66,0-1V33.14c0-.48,0-.93,0-1.36s0-.83-.06-1.19,0-.68-.06-.93h1.65c0,.26,0,.58-.06.94s0,.76,0,1.19,0,.89,0,1.37,0,1,0,1.42v1.85a3.16,3.16,0,0,0,.59,2.11,2.26,2.26,0,0,0,1.8.68,4.14,4.14,0,0,0,1.48-.29A6.34,6.34,0,0,0,57,38V33.14c0-.48,0-.93,0-1.36S57,31,57,30.59s0-.68-.06-.93h1.65c0,.26,0,.58-.06.94s0,.76,0,1.19,0,.89,0,1.37,0,1,0,1.42v.72c0,.49,0,1,0,1.46s0,.93,0,1.36,0,.83,0,1.19,0,.68.06.93H57.28c0-.12,0-.29-.07-.5s-.06-.44-.09-.69c-.37.25-.75.49-1.15.72s-.75.43-1.06.59A2.58,2.58,0,0,1,54.43,40.45Z"/>
                                                                          <path className="cls-2" d="M61.36,40.24c0-.26,0-.57.06-.94s0-.76.06-1.19,0-.89,0-1.37v-3.6c0-.48,0-.93,0-1.36s0-.83-.06-1.19,0-.68-.06-.93H63c0,.26,0,.58-.06.94s0,.76-.05,1.19,0,.89,0,1.37,0,1,0,1.42v.72c0,.49,0,1,0,1.46s0,.93,0,1.36,0,.83.05,1.19,0,.68.06.93Z"/>
                                                                          <path className="cls-2" d="M70.76,38.71c-.56-.69-1.19-1.43-1.88-2.22l-.69,0-.86-.06c0,.78,0,1.51.06,2.2s0,1.23.09,1.64H65.83c0-.26,0-.57.06-.94s0-.76.06-1.19,0-.89,0-1.37v-3.6c0-.48,0-.93,0-1.36s0-.83-.06-1.19,0-.68-.06-.93l1,0L68,29.57l1-.07.49,0a3.46,3.46,0,0,1,2.46.89,3.07,3.07,0,0,1,1,2.33,3.39,3.39,0,0,1-.39,1.63,3.29,3.29,0,0,1-1.16,1.22,4.53,4.53,0,0,1-.49.29l-.53.24q1,1.16,1.89,2.13c.59.65,1.06,1.13,1.4,1.45a1.72,1.72,0,0,1,0,.29,1.8,1.8,0,0,1,0,.3l-1.61,0C71.73,39.92,71.33,39.4,70.76,38.71Zm-.05-4A2.22,2.22,0,0,0,71.35,33a2.27,2.27,0,0,0-.63-1.7A2.36,2.36,0,0,0,69,30.65l-.67,0-.89.05c0,.53,0,1.13,0,1.81s0,1.35,0,2v.63l.88,0,.71,0A2.5,2.5,0,0,0,70.71,34.67Z"/>
                                                                          <path className="cls-2" d="M81.93,40.28l-2.18,0H75.39c0-.26,0-.57.06-.94s0-.76,0-1.19,0-.89,0-1.37,0-1,0-1.42V34.6c0-.49,0-1,0-1.46s0-.93,0-1.36,0-.83,0-1.2,0-.69-.06-.95l1.43,0h2.36l1,0h.89l.67,0L81.57,31l-.26,0a.93.93,0,0,1-.25,0,9.79,9.79,0,0,0-1.22-.15q-.81-.06-1.62-.06h-.63l-.63,0c0,.48,0,1,0,1.59s0,1.17,0,1.77c.8,0,1.52,0,2.15,0s1.09-.05,1.37-.08l-.15,1.42c-.31,0-.76,0-1.37-.08l-2,0c0,.66,0,1.3,0,1.94s0,1.21,0,1.72l.76,0h.77l.93,0,.88,0,.76,0,.54-.09a1.29,1.29,0,0,1,.26,0,.9.9,0,0,1,.25,0Z"/>
                                                                        </g>
                                                                        <path className="cls-2" d="M59.77,67.67a34.92,34.92,0,0,1-5.85-.5c-13.7-1.89-25.11-7.56-36.14-13.05-5.71-2.83-12.18-6-15.63-11.23a12.91,12.91,0,0,1,3.21-17.6c5.78-4.5,14.42-7.36,22.78-10.12,6.37-2.11,13-4.29,18.12-7.16,2.42-1.34,4.34-2.59,6-3.69C57.92.66,61-1.36,70.52,1A27.34,27.34,0,0,1,89.86,18.47C94,29.55,92.13,43.65,85.22,53.56c-2.76,4-8.78,11-18,13.29A34.22,34.22,0,0,1,59.77,67.67ZM63.46,1C59.23,1,56.7,2.64,52.84,5.16c-1.71,1.11-3.65,2.37-6.09,3.73C41.5,11.8,34.87,14,28.45,16.12c-8.28,2.73-16.84,5.56-22.48,10H6A11.92,11.92,0,0,0,3,42.34c3.31,5,9.65,8.11,15.25,10.89,11,5.45,22.29,11.09,35.84,13A33.49,33.49,0,0,0,67,65.88c8.88-2.17,14.71-9,17.4-12.89,6.73-9.65,8.55-23.38,4.52-34.17A26.32,26.32,0,0,0,70.27,2,28,28,0,0,0,63.46,1Z"/>
                                                                      </g>
                                                                    </g>
                                                                  </g>
                                                                </g>
                                                              </svg>
                                                        </Link>
                                                    </div>
                                                </div>
                                            </div>
                                        )
                                    })
                                }
                            </div>
                        </>
                    : typeof window !== `undefined` && navigate('/404/')
                }
            </Layout>
        </>
    );
}

export default RetreatDetail;
